<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fitting a Cox-Model on PLSR components — coxpls2 • plsRcox</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Fitting a Cox-Model on PLSR components — coxpls2" />

<meta property="og:description" content="This function computes the the Cox-Model with PLSR components as the explanatory variables. It uses the package pls." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plsRcox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.7.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fbertran/plsRcox">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fitting a Cox-Model on PLSR components</h1>
    
    <div class="hidden name"><code>coxpls2.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function computes the the Cox-Model with PLSR components as the explanatory variables. It uses the package <code>pls</code>.</p>
    
    </div>

    <pre class="usage">coxpls2(Xplan, &#8230;)
# S3 method for default
coxpls2(Xplan,time,time2,event,type,origin,
typeres="deviance", collapse, weighted, scaleX=TRUE, 
scaleY=TRUE, ncomp=min(7,ncol(Xplan)), methodpls="kernelpls", 
validation = "CV", plot=FALSE, allres=FALSE,...)
# S3 method for formula
coxpls2(Xplan,time,time2,event,type,origin,
typeres="deviance", collapse, weighted, scaleX=TRUE, 
scaleY=TRUE, ncomp=min(7,ncol(Xplan)), methodpls="kernelpls", 
validation = "CV", plot=FALSE, allres=FALSE,dataXplan=NULL,
subset,weights,model_frame=FALSE,...)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Xplan</th>
      <td><p>a formula or a matrix with the eXplanatory variables (training) dataset</p></td>
    </tr>
    <tr>
      <th>time</th>
      <td><p>for right censored data, this is the follow up time. For interval data, the first argument is the starting time for the interval.</p></td>
    </tr>
    <tr>
      <th>time2</th>
      <td><p>The status indicator, normally 0=alive, 1=dead. Other choices are <code>TRUE/FALSE</code> (<code>TRUE</code> = death) or 1/2 (2=death). For interval censored data, the status indicator is 0=right censored, 1=event at <code>time</code>, 2=left censored, 3=interval censored. Although unusual, the event indicator can be omitted, in which case all subjects are assumed to have an event.</p></td>
    </tr>
    <tr>
      <th>event</th>
      <td><p>ending time of the interval for interval censored or counting process data only. Intervals are assumed to be open on the left and closed on the right, <code>(start, end]</code>. For counting process data, event indicates whether an event occurred at the end of the interval.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character string specifying the type of censoring. Possible values are <code>"right"</code>, <code>"left"</code>, <code>"counting"</code>, <code>"interval"</code>, or <code>"interval2"</code>. The default is <code>"right"</code> or <code>"counting"</code> depending on whether the <code>time2</code> argument is absent or present, respectively.</p></td>
    </tr>
    <tr>
      <th>origin</th>
      <td><p>for counting process data, the hazard function origin. This option was intended to be used in conjunction with a model containing time dependent strata in order to align the subjects properly when they cross over from one strata to another, but it has rarely proven useful.</p></td>
    </tr>
    <tr>
      <th>typeres</th>
      <td><p>character string indicating the type of residual desired. Possible values are <code>"martingale"</code>, <code>"deviance"</code>, <code>"score"</code>, <code>"schoenfeld"</code>, <code>"dfbeta"</code>, <code>"dfbetas"</code>, and <code>"scaledsch"</code>. Only enough of the string to determine a unique match is required.</p></td>
    </tr>
    <tr>
      <th>collapse</th>
      <td><p>vector indicating which rows to collapse (sum) over. In time-dependent models more than one row data can pertain to a single individual. If there were 4 individuals represented by 3, 1, 2 and 4 rows of data respectively, then <code>collapse=c(1,1,1,2,3,3,4,4,4,4)</code> could be used to obtain per subject rather than per observation residuals.</p></td>
    </tr>
    <tr>
      <th>weighted</th>
      <td><p>if <code>TRUE</code> and the model was fit with case weights, then the weighted residuals are returned.</p></td>
    </tr>
    <tr>
      <th>scaleX</th>
      <td><p>Should the <code>Xplan</code> columns be standardized ?</p></td>
    </tr>
    <tr>
      <th>scaleY</th>
      <td><p>Should the <code>time</code> values be standardized ?</p></td>
    </tr>
    <tr>
      <th>ncomp</th>
      <td><p>The number of components to include in the model. The number of components to fit is specified with the argument ncomp. It this is not supplied, the maximal number of components is used (taking account of any cross-validation).</p></td>
    </tr>
    <tr>
      <th>methodpls</th>
      <td><p>The multivariate regression method to be used. See <code><a href='https://www.rdocumentation.org/packages/pls/topics/mvrCv'>mvrCv</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>validation</th>
      <td><p>character. What kind of (internal) validation to use. If <code>validation = "CV"</code>, cross-validation is performed. The number and type of cross-validation segments are specified with the arguments <code>segments</code> and <code>segment.type</code>. See <code><a href='https://www.rdocumentation.org/packages/pls/topics/mvrCv'>mvrCv</a></code> for details. If <code>validation = "LOO"</code>, leave-one-out cross-validation is performed. It is an error to specify the segments when <code>validation = "LOO"</code> is specified.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>Should the survival function be plotted ?)</p></td>
    </tr>
    <tr>
      <th>allres</th>
      <td><p>FALSE to return only the Cox model and TRUE for additionnal results. See details. Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>dataXplan</th>
      <td><p>an optional data frame, list or environment (or object coercible by <code><a href='https://www.rdocumentation.org/packages/base/topics/as.data.frame'>as.data.frame</a></code> to a data frame) containing the variables in the model. If not found in <code>dataXplan</code>, the variables are taken from <code><a href='https://www.rdocumentation.org/packages/base/topics/environment'>environment(Xplan)</a></code>, typically the environment from which <code>coxpls2</code> is called.</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>an optional vector specifying a subset of observations to be used in the fitting process.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>an optional vector of 'prior weights' to be used in the fitting process. Should be <code>NULL</code> or a numeric vector.</p></td>
    </tr>
    <tr>
      <th>model_frame</th>
      <td><p>If <code>TRUE</code>, the model frame is returned.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Arguments to be passed on to <code><a href='https://www.rdocumentation.org/packages/survival/topics/coxph'>survival::coxph</a></code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If <code>allres=FALSE</code> returns only the final Cox-model.
If <code>allres=TRUE</code> returns a list with the PLS components, the final Cox-model and the PLSR model.
<code>allres=TRUE</code> is useful for evluating model prediction accuracy on a test sample.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If <code>allres=FALSE</code> :</p>
<dt>cox_pls</dt><dd><p>Final Cox-model.</p></dd>
If allres=TRUE :
<dt>tt_pls</dt><dd><p>PLSR components.</p></dd>
<dt>cox_pls</dt><dd><p>Final Cox-model.</p></dd>
<dt>pls_mod</dt><dd><p>The PLSR model.</p></dd>

    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>plsRcox, Cox-Models in a high dimensional setting in R, Frederic Bertrand, Philippe Bastien, Nicolas Meyer and Myriam Maumy-Bertrand (2014). Proceedings of User2014!, Los Angeles, page 152.<br /></p>  
<p>Deviance residuals-based sparse PLS and sparse kernel PLS regression for censored data, Philippe Bastien, Frederic Bertrand, Nicolas Meyer and Myriam Maumy-Bertrand (2015), Bioinformatics, 31(3):397-404, doi:10.1093/bioinformatics/btu660.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://www.rdocumentation.org/packages/survival/topics/coxph'>coxph</a></code>, <code><a href='https://www.rdocumentation.org/packages/pls/topics/mvr'>plsr</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>micro.censure</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>Xmicro.censure_compl_imp</span>)

<span class='no'>X_train_micro</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/apply'>apply</a></span>((<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/matrix'>as.matrix</a></span>(<span class='no'>Xmicro.censure_compl_imp</span>)),<span class='kw'>FUN</span><span class='kw'>=</span><span class='st'>"as.numeric"</span>,<span class='kw'>MARGIN</span><span class='kw'>=</span><span class='fl'>2</span>)[<span class='fl'>1</span>:<span class='fl'>80</span>,]
<span class='no'>X_train_micro_df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='no'>X_train_micro</span>)
<span class='no'>Y_train_micro</span> <span class='kw'>&lt;-</span> <span class='no'>micro.censure</span>$<span class='no'>survyear</span>[<span class='fl'>1</span>:<span class='fl'>80</span>]
<span class='no'>C_train_micro</span> <span class='kw'>&lt;-</span> <span class='no'>micro.censure</span>$<span class='no'>DC</span>[<span class='fl'>1</span>:<span class='fl'>80</span>]

(<span class='no'>cox_pls_fit</span><span class='kw'>=</span><span class='fu'>coxpls2</span>(<span class='no'>X_train_micro</span>,<span class='no'>Y_train_micro</span>,<span class='no'>C_train_micro</span>,<span class='kw'>ncomp</span><span class='kw'>=</span><span class='fl'>6</span>,<span class='kw'>validation</span><span class='kw'>=</span><span class='st'>"CV"</span>))
(<span class='no'>cox_pls_fit</span><span class='kw'>=</span><span class='fu'>coxpls2</span>(~<span class='no'>X_train_micro</span>,<span class='no'>Y_train_micro</span>,<span class='no'>C_train_micro</span>,<span class='kw'>ncomp</span><span class='kw'>=</span><span class='fl'>6</span>,<span class='kw'>validation</span><span class='kw'>=</span><span class='st'>"CV"</span>))
(<span class='no'>cox_pls_fit</span><span class='kw'>=</span><span class='fu'>coxpls2</span>(~<span class='no'>.</span>,<span class='no'>Y_train_micro</span>,<span class='no'>C_train_micro</span>,<span class='kw'>ncomp</span><span class='kw'>=</span><span class='fl'>6</span>,<span class='kw'>validation</span><span class='kw'>=</span><span class='st'>"CV"</span>,
<span class='kw'>dataXplan</span><span class='kw'>=</span><span class='no'>X_train_micro_df</span>))

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/rm'>rm</a></span>(<span class='no'>X_train_micro</span>,<span class='no'>Y_train_micro</span>,<span class='no'>C_train_micro</span>,<span class='no'>cox_pls_fit</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Frederic Bertrand<br />
<a href='mailto:frederic.bertrand@math.unistra.fr'>frederic.bertrand@math.unistra.fr</a><br />
<a href='http://www-irma.u-strasbg.fr/~fbertran/'>http://www-irma.u-strasbg.fr/~fbertran/</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Frederic Bertrand, Myriam Maumy-Bertrand.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

